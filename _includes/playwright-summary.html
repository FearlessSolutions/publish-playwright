{% if include.data %}
	<!-- use the custom normalize_playwright filter to get the status, total number of tests, errors, and test statistics from the data -->
	{% assign results = include.data | normalize_playwright %}
	<!-- if the data was included, display the summary -->
	<div class="flex flex-col">
		<div class="mt-4 py-2 px-4 font-light text-xs text-gray-500 border border-light-gray border-b-0 rounded-t-md bg-gray-100 flex justify-between">
			<!-- if the run_id was included, display it in the header of the summary -->
			{% if include.run_id %}
				<!-- capture also creates strings with variables, create the url back to the run -->
				{% capture run_link %}{{ site.github_url }}/actions/runs/{{ include.run_id }}{% endcapture %}
				<!-- no relative_url necessary here because the link it outside of the app -->
				<span>Run Id: <a href="{{ run_link }}" target="_blank">{{ include.run_id }}</a></span>
			{% else %}
				<span></span>
			{% endif %}
			<!-- Liquid provides a helper method for formatting dates -->
			<span>Run At: {{ results.startTime | date: "%Y-%m-%d %H:%M %Z" }}</span>
		</div>
		<div class="pt-4 pb-2 text-sm leading-normal border border-light-gray rounded-b-md flex items-center justify-around">
			<!-- style the icon according to the report status and use the custom status_icon filter to return the correct svg -->
			<span class="w-14 h-14 {{results.status}}">{{ results.status | status_icon }}</span>
			<div class="flex flex-col py-2 w-3/4">
				{% if results.status == "warn" %}
					<!-- if there are errors, there won't be any test statistics, so only display the errors -->
					<div class="flex flex-col py-2 px-0 gap-4 font-mono">
					{% for error in results.errors %}
						<!-- loop through the errors and display the messages -->
						<div class="flex flex-wrap border rounded-md py-2 px-4 border-light-gray">{{ error.message }}</div>
					{% endfor %}
					</div>
				{% else %}
					<!-- if there are no errors, display the test statistics -->
					<div class="flex flex-row font-medium leading-8">
						{% include playwright-stat.html label="All" value=results.total %}
						{% include playwright-stat.html label="Passed" value=results.expected %}
						{% include playwright-stat.html label="Failed" value=results.unexpected %}
						{% include playwright-stat.html label="Flaky" value=results.flaky %}
						{% include playwright-stat.html label="Skipped" value=results.skipped %}
					</div>
				{% endif %}

				<!-- Liquid provides a helper method that will create the link relative to the baseurl set in _config.yml -->
				<span class="flex justify-end min-h-4"><a href="{{ include.url | relative_url }}" target="_blank">View Full Report</a></span>
			</div>
		</div>
	</div>
{% else %}
	<!-- if the data was not included, display a message that there is nothing to display -->

	<div>There is currently no report for {{ include.branch }}</div>
{% endif %}
